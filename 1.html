<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Kahoot-like â€” Teacher</title>
<style>
  body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;margin:0;background:#f3f6fb;color:#111}
  header{background:#2563eb;color:#fff;padding:14px;text-align:center;font-size:20px;font-weight:700}
  .wrap{max-width:1100px;margin:18px auto;padding:0 12px}
  .controls{text-align:center;margin-bottom:14px}
  input,button{padding:10px;border-radius:8px;border:1px solid #cbd5e1;font-size:15px}
  button{background:#2563eb;color:#fff;border:none;cursor:pointer}
  button:disabled{background:#cbd5e1;color:#6b7280;cursor:not-allowed}
  .stage{background:#fff;border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(15,23,42,0.08);min-height:220px}
  .timer{font-size:26px;font-weight:800;margin-bottom:10px}
  .question{font-size:24px;font-weight:800;margin-bottom:14px}
  .options{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .opt{padding:18px;border-radius:12px;color:#fff;font-weight:800;text-align:center;transition:all .3s}
  .red{background:#e63946}.blue{background:#2a9df4}.yellow{background:#f4b400;color:#111}.green{background:#2ec4b6}
  .opt.correct{outline:5px solid #10b981}
  .opt.wrong{opacity:.4}
  .card{flex:1;background:#fff;padding:12px;border-radius:10px;box-shadow:0 1px 4px rgba(2,6,23,0.06);margin-top:14px}
  .row{display:flex;justify-content:space-between;padding:6px;border-bottom:1px solid #f1f5f9}
  .hidden{display:none}
  .podium{display:flex;justify-content:center;align-items:flex-end;gap:20px;margin-top:20px}
  .podium div{background:#2563eb;color:#fff;width:120px;text-align:center;border-radius:12px;padding:10px;transition:all .6s}
  .first{height:200px}.second{height:160px;background:#94a3b8}.third{height:140px;background:#f97316}
</style>
</head>
<body>
<header>Kahoot-like â€” Teacher</header>
<div class="wrap">
  <div class="controls" id="controlsArea">
    <button id="createRoom">Create Room</button>
    <button id="startBtn" disabled>START</button>
    <div id="roomInfo" style="margin-top:8px;font-weight:bold"></div>
  </div>

  <div id="stage" class="stage">
    <div id="waitingView">â³ Waiting for players...</div>

    <div id="questionView" class="hidden">
      <div class="timer">â³ <span id="timeLeft">0</span>s</div>
      <div class="question" id="qText">CÃ¢u há»i</div>
      <div class="options" id="optionsBox"></div>
    </div>

    <div id="afterView" class="hidden" style="text-align:center">
      <h3>âœ… ÄÃ¡p Ã¡n Ä‘Ãºng Ä‘Ã£ hiá»ƒn thá»‹</h3>
      <button id="showTopBtn">Xem báº£ng xáº¿p háº¡ng</button>
    </div>

    <div id="leaderboardView" class="hidden">
      <h3>Báº£ng xáº¿p háº¡ng Top 20</h3>
      <div id="topList"></div>
      <button id="nextQBtn">Next Question</button>
    </div>

    <div id="finalView" class="hidden">
      <h2>Káº¿t thÃºc trÃ² chÆ¡i ğŸ‰</h2>
      <div id="finalRank"></div>
      <div class="podium" id="podiumBox"></div>
      <button onclick="exportCSV()">Export CSV</button>
    </div>
  </div>

  <div class="card" id="playersCard">
    <h4>Players</h4>
    <div id="playersList">-</div>
  </div>
</div>

<!-- Sounds -->
<audio id="soundStart" src="https://actions.google.com/sounds/v1/cartoon/slide_whistle_to_drum.ogg"></audio>
<audio id="soundEnd" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>
<audio id="soundTick" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="soundCorrect" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="soundWrong" src="https://actions.google.com/sounds/v1/cartoon/metal_thud_and_clang.ogg"></audio>
<audio id="soundBg" src="https://actions.google.com/sounds/v1/ambiences/office.ogg" loop></audio>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
const firebaseConfig={apiKey:"AIzaSyBMIxJxZ4GC8HTTKREB45SRSbTay15Kg7I",
authDomain:"kahoot-like-5251e.firebaseapp.com",
databaseURL:"https://kahoot-like-5251e-default-rtdb.asia-southeast1.firebasedatabase.app",
projectId:"kahoot-like-5251e",storageBucket:"kahoot-like-5251e.appspot.com",
messagingSenderId:"805207333072",appId:"1:805207333072:web:63d23d41b05fa6bd71e6d5"};
firebase.initializeApp(firebaseConfig);
const db=firebase.database();

let roomId=null,currentIndex=-1,countdown=null,playersCache={};

// ===== 28 cÃ¢u há»i Ä‘áº§y Ä‘á»§ =====
const questions=[
{text:"90Â° = ?",options:["Ï€/2","Ï€","2Ï€","Ï€/3"],correct:0,time:15},
{text:"45Â° = ?",options:["Ï€/4","Ï€/6","Ï€/3","Ï€/2"],correct:0,time:15},
{text:"60Â° = ?",options:["Ï€/3","Ï€/2","2Ï€/3","Ï€/4"],correct:0,time:15},
{text:"180Â° = ?",options:["Ï€","Ï€/2","2Ï€","3Ï€/2"],correct:0,time:15},
{text:"270Â° = ?",options:["3Ï€/2","Ï€","2Ï€","Ï€/2"],correct:0,time:15},
{text:"360Â° = ?",options:["2Ï€","Ï€","Ï€/2","3Ï€/2"],correct:0,time:15},
{text:"30Â° = ?",options:["Ï€/6","Ï€/3","Ï€/2","Ï€/4"],correct:0,time:15},
{text:"120Â° = ?",options:["2Ï€/3","Ï€/3","Ï€/2","Ï€"],correct:0,time:15},
{text:"150Â° = ?",options:["5Ï€/6","Ï€/2","2Ï€/3","Ï€"],correct:0,time:15},
{text:"210Â° = ?",options:["7Ï€/6","Ï€","3Ï€/2","2Ï€"],correct:0,time:15},
{text:"240Â° = ?",options:["4Ï€/3","Ï€","Ï€/2","3Ï€/2"],correct:0,time:15},
{text:"300Â° = ?",options:["5Ï€/3","Ï€","Ï€/2","2Ï€"],correct:0,time:15},
{text:"330Â° = ?",options:["11Ï€/6","Ï€","Ï€/2","2Ï€"],correct:0,time:15},
{text:"Sinh(0Â°) = ?",options:["0","1","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cos(0Â°) = ?",options:["1","0","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Sin(90Â°) = ?",options:["1","0","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cos(90Â°) = ?",options:["0","1","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Sin(180Â°) = ?",options:["0","1","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cos(180Â°) = ?",options:["-1","0","1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Sin(270Â°) = ?",options:["-1","0","1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cos(270Â°) = ?",options:["0","-1","1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Sin(360Â°) = ?",options:["0","1","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cos(360Â°) = ?",options:["1","0","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Tan(45Â°) = ?",options:["1","0","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Cot(45Â°) = ?",options:["1","0","-1","KhÃ´ng xÃ¡c Ä‘á»‹nh"],correct:0,time:15},
{text:"Tan(0Â°) = ?",options:["0","1","KhÃ´ng xÃ¡c Ä‘á»‹nh","-1"],correct:0,time:15},
{text:"Tan(90Â°) = ?",options:["KhÃ´ng xÃ¡c Ä‘á»‹nh","0","1","-1"],correct:0,time:15},
{text:"Cot(0Â°) = ?",options:["KhÃ´ng xÃ¡c Ä‘á»‹nh","0","1","-1"],correct:0,time:15},
{text:"Cot(90Â°) = ?",options:["0","KhÃ´ng xÃ¡c Ä‘á»‹nh","1","-1"],correct:0,time:15}
];

// ===== Logic game giá»¯ nguyÃªn nhÆ° báº£n trÆ°á»›c (auto-close, top20, podium, CSV, Ã¢m thanh, shuffle) =====
// (do code dÃ i, mÃ¬nh giá»¯ nguyÃªn pháº§n JS xá»­ lÃ½ y nhÆ° báº¡n Ä‘Ã£ copy á»Ÿ báº£n trÆ°á»›c,
// chá»‰ thay máº£ng questions thÃ nh 28 cÃ¢u á»Ÿ trÃªn)
...
</script>
</body>
</html>
